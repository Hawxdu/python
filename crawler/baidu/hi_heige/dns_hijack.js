                                    <!DOCTYPE html><html  id="customDoc"><!--STATUS OK--> <head> <meta http-equiv=Content-Type content="text/html; charset=utf-8"> <title> dns_hijack.js_5up3rh3i&#39;blog_百度空间</title> <link rel="shortcut icon" href="http://hi.bdimg.com/static/qbase/img/mod/16_favicon.ico?v=116ba471.ico" type=image/x-icon>   <meta name=keywords content="dns_hijack.js,"> <meta name=description content="&lt;script&gt;/*///*/alert(1);&lt;/script&gt;
GTalk:5up3rh3i@gmail.com,dns_hijack.js"><script>window.wpo={start:new Date*1,pid:109,page:'qing'}</script><!--[if IE]><script type="text/javascript">(function(){var e="abbr,article,aside,audio,canvas,datalist,details,dialog,eventsource,figure,footer,header,hgroup,mark,menu,meter,nav,output,progress,section,time,video".split(","),t=e.length;while(t--)document.createElement(e[t])})();</script><![endif]--><script>window.qDomain={"qing":"http://hi.baidu.com","static":"http://hi.bdimg.com","passport":"https://passport.baidu.com","portrait":"http://tx.bdimg.com","hiup":"http://hi.baidu.com","photo":"http://hiphotos.baidu.com","message":"http://msg.baidu.com","friend":"http://frd.baidu.com","mp3":"http://mp3.baidu.com","ting":"http://ting.baidu.com","image":"http://img.baidu.com","qup":"http://upload.hi.baidu.com","www":"http://www.baidu.com"};window.qUserInfo={"userName":"hi_heige","nickname":"hi_heige","portrait":"a93f68695f6865696765fa04","qingUrl":"\/hi_heige","spaceName":"5up3rh3i\&#39;blog","right":"0","avatarStatus":"1","flagNeedInvite":"0","flagNotInvited":"0","version":"2"};window.qVisitorInfo={"userName":"","nickname":"","portrait":"","isHost": false,"isRandUrl": false,"isForceMoved": false,"loginStatus":"not_login","isOldUser":0,"qingUrl":"","right":"0","version":"0"};window.qPageInfo={"pageUrl":"http:\/\/hi.baidu.com\/hi_heige\/item\/29ef7af7cdd5e51de3e3bd64","referUrl":""};window.qUserAvatar={size20:"http://hiphotos.baidu.com/space/scrop=20;q=100/sign=536115cc0fb30f2431c4ab5cb8a8e373/838ba61ea8d3fd1f69dc1c97304e251f94ca5f41.jpg",size40:"http://hiphotos.baidu.com/space/scrop=40;q=100/sign=275b84b942a7d933bbf6a32cdd76e523/838ba61ea8d3fd1f69dc1c97304e251f94ca5f41.jpg",size65:"http://hiphotos.baidu.com/space/scrop=65;q=100/sign=6a4f52aec895d143de28a37c03cdb437/838ba61ea8d3fd1f69dc1c97304e251f94ca5f41.jpg",size110:"http://hiphotos.baidu.com/space/scrop=110;q=100/sign=b0caf9930cf3d7ca08a8782982228f38/838ba61ea8d3fd1f69dc1c97304e251f94ca5f41.jpg",size160:"http://hiphotos.baidu.com/space/scrop=160;q=100/sign=b0caf9930cf3d7ca08a8782982228f3f/838ba61ea8d3fd1f69dc1c97304e251f94ca5f41.jpg"};window.qVisitorAvatar={size20:"",size40:"",size65:"",size110:"",size160:""};window.qBdsToken="the fisrt two args should be string type:0,1!";window.qErrorInfo={"no":"0","msg":""};window.qServerInfo={"timeStamp":"1428996211"};window.qLongPolling={"url":"http:\/\/m.hi.baidu.com\/i\/msg\/listen"}</script><!--[if (lt IE 8.0)]><link href="http://hi.bdimg.com/static/qbase/css/qbase.css?v=d097b2a7.css" type=text/css rel=stylesheet><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link href="http://hi.bdimg.com/static/qbase/css/qbase_datauri.css?v=c2391e47.css" type=text/css rel=stylesheet><!--<![endif]-->     <!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/qcomment/css/qcomment.css?v=5ba753ab.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/qcomment/css/qcomment_datauri.css?v=a90beb01.css"><!--<![endif]--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/qhome/css/common/mod_userInfo.css?v=86bf4259.css">    <!--[if (lt IE 8.0)]><link type=text/css rel=stylesheet href="http://hi.bdimg.com/static/qhome/css/detail/n0001/detail.css?v=2247b49c.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link type=text/css rel=stylesheet href="http://hi.bdimg.com/static/qhome/css/detail/n0001/detail_datauri.css?v=8b3028a2.css"><!--<![endif]-->     <link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/qpublish/css/editor/shCoreDefault.css?v=79e715f0.css">  <style type="text/css"></style>     <script src="http://hi.bdimg.com/static/qbase/js/qing/qing.js?v=4d5f41d2.js"></script>  <script>
    /*最终页页面变量*/ 
    window.detailPage = {
        threadId : "29ef7af7cdd5e51de3e3bd64",
        blogTitle: "dns_hijack.js" || "无标题",
        contentType : "text",
        originAuthorName : "",
        originPortrait : "",
        originThreadId : ""
    }; 
    </script><script>wpo.head=new Date*1;</script> </head> <body>  <header class=mod-topbar id=modTopbar><iframe class=mod-topbar-bgframe></iframe><div class=mod-topbar-pseudo-real><div class="wrapper-box clearfix"><div class=left-box><a href="http://hi.baidu.com" class=logo-box><span id=baiduSpaceLogo class=q-logo></span></a></div> <div class=center-box><ul class=q-menubox>  <li class="q-menuitem q-newicon"> <a href=http://xiangce.baidu.com target=_blank>相册</a>  <li class="q-menuitem " id=qMenuRecommend><a href="http://hi.baidu.com/index/">广场</a><li class="q-menuitem q-newicon q-menu-item-game"><a href=http://youxi.baidu.com/yxpm/pm.jsp?pid=10106000091_970983 target=_blank>游戏</a><div class=q-game-frame><iframe src=about:blank frameborder=no border=0 scrolling=0></iframe></div></ul></div>  <div class=right-box><ul class=q-navbox><li class=q-navitem> <a href="http://hi.baidu.com/go/login">登录</a><li class="q-navitem q-nav-sp"><span></span><li class=q-navitem><a href="http://hi.baidu.com/go/reg?pmfrom=qingtop">注册</a> </ul><div class="right mod-qhome-follow-box"><a href="#" class="follow-btn a-btn-follow qing-stat-nsclick" data-nsclick=20121012follow_hdbtnaddcare>关注此空间</a></div> </div> </div></div></header>  <section class=mod-page-body> <div class="mod-page-main wordwrap clearfix">  <div class=x-page-container>    <section class="mod-topspaceinfo mod-cs-header"><div class=head-topbar></div><div class=container><h1><a class="space-name cs-header-spacename" href="/hi_heige">5up3rh3i&#39;blog</a></h1><p class="space-description cs-header-spacesummary"> /*///*/alert(1); 
GTalk:5up3rh3i@gmail.com</p></div><div class=head-footer></div></section>   <div class=mod-blogpage-wraper> <div class="blog-bg-main-repeat hide"></div>  <div class="grid-80 mod-blogpage"> <div class="blog-bg-main hide"></div>    <div class="mod-text-content mod-post-content mod-cs-contentblock"> <div class=cs-contentblock-bg></div>   <div class="content-head clearfix">  <div class=content-other-info>  <span>2013-12-01 15:24</span>  </div>   <h2 class="title content-title">dns_hijack.js</h2>  </div>  <div id=content class="content mod-cs-content text-content clearfix"> <p>前面“dns_hijack”很火爆，可以说是再一次的“挂马”高潮！网站被挂路由CSRF代码，达到篡改DNS的目的。为了方便站长自查，我们在线上的检查程序：<a title="http://zhanzhang.anquan.org/topic/dns_hijacking/" href="http://zhanzhang.anquan.org/topic/dns_hijacking/" target="_blank">http://zhanzhang.anquan.org/topic/dns_hijacking/ </a>加入估计代码直接溯源出被篡改的js文件。<br /></p><p><img width="640" src="http://h.hiphotos.bdimg.com/album/pic/item/ac345982b2b7d0a2632ace91c9ef76094a369adf.jpg" /></p><p>下面这个代码是一个直接客户端js里的简单实现。</p><div class="syntaxhighlighter  js"><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div></td><td class="code"><p><code><br /></code></p><p><code><br /></code></p><p><code><br /></code></p><p><code><br /></code></p><p><code>/**</code></p><div class="line number2 index1 alt1"><code>&nbsp;</code><code>* @name: dns_hijack.js</code></div><div class="line number3 index2 alt2"><code>&nbsp;</code><code>* @author: 5up3rh3i@gmail.com</code></div><div class="line number4 index3 alt1"><code>&nbsp;</code><code>* @date: 2013-11-23</code></div><div class="line number5 index4 alt2"><code>&nbsp;</code><code>* @version: 1.0</code></div><div class="line number6 index5 alt1"><code>&nbsp;</code><code>*/</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code>DeleteCookie();</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code>var</code> <code>scripts=document.getElementsByTagName(</code><code>&quot;script&quot;</code><code>);</code></div><div class="line number11 index10 alt2"><code>var</code> <code>jsArray=</code><code>new</code> <code>Array();</code></div><div class="line number12 index11 alt1"><code>&nbsp;</code>&nbsp;</div><div class="line number13 index12 alt2"><code>for</code> <code>(p </code><code>in</code> <code>scripts) {</code></div><div class="line number14 index13 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code> <code>(</code><code>typeof</code><code>(scripts[p].src) != </code><code>&#39;undefined&#39;</code> <code>&amp;&amp; scripts[p].src != </code><code>&#39;&#39;</code> <code>&amp;&amp; scripts[p].src.indexOf(</code><code>&quot;chrome-extension&quot;</code><code>) &lt; 0) {</code></div><div class="line number15 index14 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>jsArray.push(scripts[p].src);</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></div><div class="line number18 index17 alt1"><code>}</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code>var</code> <code>c = 0;</code></div><div class="line number21 index20 alt2"><code>var</code> <code>t = jsArray.length;</code></div><div class="line number22 index21 alt1"><code>var</code> <code>jsTree = </code><code>&quot;&quot;</code><code>;</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code>function</code> <code>count(){</code></div><div class="line number25 index24 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>jsLoader(jsArray[c]);</code></div><div class="line number26 index25 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>c = c + 1;</code></div><div class="line number27 index26 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code> <code>(c&lt;t) {</code></div><div class="line number28 index27 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>setTimeout(</code><code>&quot;count()&quot;</code><code>,10000);</code></div><div class="line number29 index28 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></div><div class="line number30 index29 alt1"><code>}</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code>function</code> <code>jsLoader(jsrc){</code></div><div class="line number33 index32 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>DeleteCookie();</code></div><div class="line number34 index33 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>//console.info(jsrc);</code></div><div class="line number35 index34 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>document.write(</code><code>&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;检测JS：&quot;</code><code>+jsrc+</code><code>&quot;......&lt;br&gt;&lt;script src=&quot;</code><code>+jsrc+</code><code>&quot;&gt;&lt;/script&gt;&lt;/body&gt;&quot;</code><code>);</code></div><div class="line number36 index35 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>try</code><code>{</code></div><div class="line number37 index36 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>for</code> <code>(</code><code>var</code> <code>i = 0; i &lt; document.images.length; i++) {</code></div><div class="line number38 index37 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number39 index38 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code> <code>(document.images[i].src.indexOf(</code><code>&quot;192.168&quot;</code><code>)&gt;0 ) {</code></div><div class="line number40 index39 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>console.info(jsrc);</code></div><div class="line number41 index40 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>};</code></div><div class="line number42 index41 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>};</code></div><div class="line number43 index42 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code><code>catch</code><code>(err){}</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>try</code><code>{&nbsp;&nbsp;&nbsp; </code></div><div class="line number46 index45 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>for</code> <code>(</code><code>var</code> <code>i = 0; i &lt; document.getElementsByTagName(</code><code>&#39;iframe&#39;</code><code>).length; i++) {&nbsp;&nbsp;&nbsp; </code></div><div class="line number47 index46 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code> <code>(document.body.getElementsByTagName(</code><code>&quot;iframe&quot;</code><code>)[i].src.indexOf(</code><code>&quot;192.168&quot;</code><code>)&gt;0 ) {</code></div><div class="line number48 index47 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>console.info(jsrc);</code></div><div class="line number49 index48 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>};</code></div><div class="line number50 index49 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></div><div class="line number51 index50 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code><code>catch</code><code>(err){}</code></div><div class="line number52 index51 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>try</code><code>{</code></div><div class="line number53 index52 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>document.body.innerHTML = </code><code>&quot;&quot;</code> <code>;</code></div><div class="line number54 index53 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>document.head.innerHTML = </code><code>&quot;&quot;</code><code>;</code></div><div class="line number55 index54 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code><code>catch</code><code>(err){}</code></div><div class="line number56 index55 alt1"><code>}</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code>function</code> <code>getCookieVal (offset) {&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number59 index58 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>endstr = document.cookie.indexOf (</code><code>&quot;;&quot;</code><code>, offset);&nbsp;&nbsp;&nbsp; </code></div><div class="line number60 index59 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code> <code>(endstr == -1)&nbsp; </code></div><div class="line number61 index60 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>endstr = document.cookie.length;&nbsp;&nbsp;&nbsp; </code></div><div class="line number62 index61 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>unescape(document.cookie.substring(offset, endstr));&nbsp; </code></div><div class="line number63 index62 alt2"><code>}&nbsp; </code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code>function</code> <code>GetCookie (name) {&nbsp;&nbsp;&nbsp; </code></div><div class="line number66 index65 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>arg = name + </code><code>&quot;=&quot;</code><code>;&nbsp;&nbsp;&nbsp; </code></div><div class="line number67 index66 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>alen = arg.length;&nbsp;&nbsp;&nbsp; </code></div><div class="line number68 index67 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>clen = document.cookie.length;&nbsp;&nbsp;&nbsp; </code></div><div class="line number69 index68 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>i = 0;&nbsp;&nbsp;&nbsp; </code></div><div class="line number70 index69 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>while</code> <code>(i &lt; clen) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number71 index70 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>j = i + alen;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number72 index71 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code> <code>(document.cookie.substring(i, j) == arg)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number73 index72 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>getCookieVal (j);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number74 index73 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>i = document.cookie.indexOf(</code><code>&quot; &quot;</code><code>, i) + 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number75 index74 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code> <code>(i == 0) </code><code>break</code><code>;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number76 index75 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}&nbsp;&nbsp;&nbsp; </code></div><div class="line number77 index76 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>null</code><code>;&nbsp; </code></div><div class="line number78 index77 alt1"><code>}</code></div><div class="line number79 index78 alt2">&nbsp;</div><div class="line number80 index79 alt1"><code>function</code> <code>DeleteCookie () {&nbsp;&nbsp; </code></div><div class="line number81 index80 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>tokens = document.cookie.split(</code><code>&#39;;&#39;</code><code>);</code></div><div class="line number82 index81 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>for</code> <code>(</code><code>var</code> <code>index = 0; index &lt; tokens.length; index++) {</code></div><div class="line number83 index82 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>pair = tokens[index].split(</code><code>&#39;=&#39;</code><code>);</code></div><div class="line number84 index83 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>name = unescape(pair[0]) ;</code></div><div class="line number85 index84 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>exp = </code><code>new</code> <code>Date();&nbsp;&nbsp;&nbsp; </code></div><div class="line number86 index85 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>exp.setTime (exp.getTime() - 1);&nbsp;&nbsp;&nbsp; </code></div><div class="line number87 index86 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>cval = GetCookie (name);&nbsp;&nbsp;&nbsp; </code></div><div class="line number88 index87 alt1"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>document.cookie = name + </code><code>&quot;=&quot;</code> <code>+ cval + </code><code>&quot;;path=/;expires=&quot;</code> <code>+ exp.toGMTString(); </code></div><div class="line number89 index88 alt2"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>} </code></div><div class="line number90 index89 alt1"><code>} </code></div><div class="line number91 index90 alt2">&nbsp;</div><div class="line number92 index91 alt1"><code>count();</code></div></td></tr></tbody></table></div><div><br /></div><p><br /></p> </div>    <div class="mod-tagbox clearfix"> </div> <div class="mod-post-info clearfix">  <div class=x-bdshare>  <div id=bdshare class="bdshare_t bds_tools get-codes-bdshare" data="{'wbuid':1727466295}"> <span class=bds_more>分享到：</span> <a class=bds_qzone></a> <a class=bds_tsina></a> <a class=bds_tqq></a> <a class=bds_renren></a> </div> <script id=bdshare_js data="type=tools&amp;uid=713670"></script> <script id=bdshell_js></script> <script>
        var bds_config = {'bdTop':240};
                    var all_img = qing.g('content').getElementsByTagName('img');
            if(all_img.length>0){
                bds_config.bdPic = all_img[0].src;
            }
                document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?v=72836429.js?cdnversion=" + Math.ceil(new Date()/3600000);
    </script> </div> <div class="op-box mod-cs-opBox">  <a class="report-btn hide" target=_blank href="#"> 举报 </a>  <span class=pv>浏览(2663)</span> <a class=comment-bnt id=commentBnt href="#" onclick="return false"> 评论<span class=comment-nub>(2)</span> </a>   <a href="#" id=shareBnt onclick="return false" class=share-bnt> 转载<span id=shareNub class=share-nub>(1)</span> </a>   </div> </div>   </div>    <div class=mod-share-detail id=shareDetail style=display:none></div>   <div class=mod-relate-blogs id=relateBlog> <h3 class=relate-title>你可能也喜欢</h3> <ul class="relate-blog-list clearfix">   <li  class=first > <a href="http://hi.baidu.com/ixiqicom/item/608b255f21880087adc8574e" target=_blank class=qing-stat-nsclick data-nsclick=m_20121105_detail_relates_img> <img src="http://a.hiphotos.baidu.com/space/scrop=90/sign=f64c3ecb9a510fb37c4730c8a90ef1a5/5ab5c9ea15ce36d3c5b8f3423ef33a87e950b107.jpg" class=relate-img alt="绳灯：Clover Pilot Light" title="绳灯：Clover Pilot Light"> </a> <a href="http://hi.baidu.com/ixiqicom/item/608b255f21880087adc8574e" target=_blank class="relate-txt qing-stat-nsclick" data-nsclick=m_20121105_detail_relates_txt>绳灯：Clover Pilot Light</a>    <li > <a href="http://hi.baidu.com/tianyi2/item/eaaadac0c7147e39c710b2f4" target=_blank class=qing-stat-nsclick data-nsclick=m_20121105_detail_relates_img> <img src="http://a.hiphotos.baidu.com/space/scrop=90/sign=fb4e8372fc1986184519a8db3ad01743/3801213fb80e7bec1cb205f22b2eb9389b506bbc.jpg" class=relate-img alt="创意的“错位”" title="创意的“错位”"> </a> <a href="http://hi.baidu.com/tianyi2/item/eaaadac0c7147e39c710b2f4" target=_blank class="relate-txt qing-stat-nsclick" data-nsclick=m_20121105_detail_relates_txt>创意的“错位”</a>    <li > <a href="http://hi.baidu.com/yaedcydnbobcgwd/item/57d20cd11537f3ee3dc2cb35" target=_blank class=qing-stat-nsclick data-nsclick=m_20121105_detail_relates_img> <img src="http://d.hiphotos.baidu.com/space/scrop=90/sign=d727901d94dda144de572bedc28ae992/5366d0160924ab184cdbd53936fae6cd7a890bea.jpg" class=relate-img alt="共厕概念设计奖" title="共厕概念设计奖"> </a> <a href="http://hi.baidu.com/yaedcydnbobcgwd/item/57d20cd11537f3ee3dc2cb35" target=_blank class="relate-txt qing-stat-nsclick" data-nsclick=m_20121105_detail_relates_txt>共厕概念设计奖</a>    <li > <a href="http://hi.baidu.com/kjzk2013/item/088f56f96bfa8467932af2f3" target=_blank class=qing-stat-nsclick data-nsclick=m_20121105_detail_relates_img> <img src="http://e.hiphotos.baidu.com/space/scrop=90/sign=42c9a33f93529822016d7e9ca7f742fb/b03533fa828ba61eac3957d74234970a314e5976.jpg" class=relate-img alt="《空间周刊》2015年第4期（总第76期）" title="《空间周刊》2015年第4期（总第76期）"> </a> <a href="http://hi.baidu.com/kjzk2013/item/088f56f96bfa8467932af2f3" target=_blank class="relate-txt qing-stat-nsclick" data-nsclick=m_20121105_detail_relates_txt>《空间周刊》2015年第4期（总第76期）</a>    <li > <a href="http://hi.baidu.com/snailthh/item/cfd4aad31dee75c3251f4014" target=_blank class=qing-stat-nsclick data-nsclick=m_20121105_detail_relates_img> <img src="http://b.hiphotos.baidu.com/space/scrop=90/sign=ee803110b78f8c54e78d82704a1414c5/b8014a90f603738de8a6fbdcb01bb051f919ec64.jpg" class=relate-img alt="【用食物打造一座城】" title="【用食物打造一座城】"> </a> <a href="http://hi.baidu.com/snailthh/item/cfd4aad31dee75c3251f4014" target=_blank class="relate-txt qing-stat-nsclick" data-nsclick=m_20121105_detail_relates_txt>【用食物打造一座城】</a>    <li > <a href="http://hi.baidu.com/huibenjiaju/item/c2c10edb02696a1a20e25061" target=_blank class=qing-stat-nsclick data-nsclick=m_20121105_detail_relates_img> <img src="http://b.hiphotos.baidu.com/space/scrop=90/sign=d9512170523d26972a8d4f0225c68bcb/dc54564e9258d109ca63b508d258ccbf6d814d83.jpg" class=relate-img alt="44平米造就完美奇迹 温馨舒适的斯德哥尔摩公寓" title="44平米造就完美奇迹 温馨舒适的斯德哥尔摩公寓"> </a> <a href="http://hi.baidu.com/huibenjiaju/item/c2c10edb02696a1a20e25061" target=_blank class="relate-txt qing-stat-nsclick" data-nsclick=m_20121105_detail_relates_txt>44平米造就完美奇迹 温馨舒适的斯德哥尔摩公寓</a>    <li > <a href="http://hi.baidu.com/hi_heige/item/90cb67fa74302bd242c36abf" target=_blank class=qing-stat-nsclick data-nsclick=m_20121105_detail_relates_img> <img src="http://a.hiphotos.baidu.com/space/scrop=90/sign=b8ba13bf720e0cf3a4a909a47a7bcb2f/838ba61ea8d3fd1f69dc1c97304e251f94ca5f41.jpg" class=relate-img alt="灯与塔" title="灯与塔"> </a> <a href="http://hi.baidu.com/hi_heige/item/90cb67fa74302bd242c36abf" target=_blank class="relate-txt qing-stat-nsclick" data-nsclick=m_20121105_detail_relates_txt>灯与塔</a>   </ul> </div>   <div class="mod-detail-pager clearfix">  <div class=detail-nav-pre> <a href="http://hi.baidu.com/hi_heige/item/7ac18a45597d410ac0161342" hidefocus title="上一篇"></a> </div>   <div class=detail-nav-next> <a href="http://hi.baidu.com/hi_heige/item/771c67d2b77dc113e1f46fcf" hidefocus title="下一篇"></a> </div>  </div>   <div id=commentDetail class="mod-comment-detail clearfix mod-cs-comment">   <div class=mod-recent-readers> <h3 class=recent-readers-title>本文最近访客</h3> <ul class="readers-list clearfix">    <li  class=first > <a target=_blank href="http://hi.baidu.com/shell32"> <img src="http://hiphotos.baidu.com/space/scrop%3D65%3Bq%3D100/sign%3Dce32e5b42834349b705829dab9d723fb/29381f30e924b899421e7d966e061d950a7bf67a.jpg" title="shell_picker" alt="shell_picker" class=portrait> </a> <a target=_blank href="http://hi.baidu.com/shell32" class=user-name title="shell_picker"> shell_picker </a> <div class=visit-time data-visit-time="1428405732"></div>      <li > <a target=_blank href="http://hi.baidu.com/xiaohz_"> <img src="http://hiphotos.baidu.com/space/scrop%3D65%3Bq%3D100/sign%3Dab59240059ee3d6d2698c094332b5b17/78310a55b319ebc44d21413e8226cffc1e17163f.jpg" title="孤独1帅哥" alt="孤独1帅哥" class=portrait> </a> <a target=_blank href="http://hi.baidu.com/xiaohz_" class=user-name title="孤独1帅哥"> 孤独1帅哥 </a> <div class=visit-time data-visit-time="1425631154"></div>      <li > <a target=_blank href="http://hi.baidu.com/rayh4c"> <img src="http://hiphotos.baidu.com/space/scrop%3D65%3Bq%3D100/sign%3D64ee630dcd11728b3473cb7db8c1f5fb/77c6a7efce1b9d16481476fdf3deb48f8d54645f.jpg" title="raystyle" alt="raystyle" class=portrait> </a> <a target=_blank href="http://hi.baidu.com/rayh4c" class=user-name title="raystyle"> raystyle </a> <div class=visit-time data-visit-time="1425609514"></div>      <li > <a target=_blank href="http://hi.baidu.com/goodwhf"> <img src="http://hiphotos.baidu.com/space/scrop%3D65%3Bq%3D100/sign%3Db852ec42938fa0ec7b99235256aa6fdb/aa64034f78f0f736754162700855b319ebc41307.jpg" title="同是土木人" alt="同是土木人" class=portrait> </a> <a target=_blank href="http://hi.baidu.com/goodwhf" class=user-name title="同是土木人"> 同是土木人 </a> <div class=visit-time data-visit-time="1415874774"></div>      <li > <a target=_blank href="http://hi.baidu.com/zuxhhhvzstkrwxr"> <img src="http://hiphotos.baidu.com/space/scrop%3D65%3Bq%3D100/sign%3D768d653b9e510fb37c4730c8a90efea0/810a19d8bc3eb135a3ba9c39a61ea8d3fd1f4436.jpg" title="Silbermond1998" alt="Silbermond1998" class=portrait> </a> <a target=_blank href="http://hi.baidu.com/zuxhhhvzstkrwxr" class=user-name title="Silbermond1998"> Silbermond1998 </a> <div class=visit-time data-visit-time="1413082787"></div>      <li > <a target=_blank href="http://hi.baidu.com/wirgont"> <img src="http://hiphotos.baidu.com/space/scrop%3D65%3Bq%3D100/sign%3D1df0909442a7d933bbf6a32cdd76e726/b03533fa828ba61eba9062af4134970a304e5937.jpg" title="bgmqk8" alt="bgmqk8" class=portrait> </a> <a target=_blank href="http://hi.baidu.com/wirgont" class=user-name title="bgmqk8"> bgmqk8 </a> <div class=visit-time data-visit-time="1412931056"></div>      <li > <a target=_blank href="http://hi.baidu.com/chncrab"> <img src="http://hiphotos.baidu.com/space/scrop%3D65%3Bq%3D100/sign%3D1b15b71fa9ec8a13104410bf873ea7ba/83025aafa40f4bfbb7d40da4034f78f0f736183d.jpg" title="CHNcrab" alt="CHNcrab" class=portrait> </a> <a target=_blank href="http://hi.baidu.com/chncrab" class=user-name title="CHNcrab"> CHNcrab </a> <div class=visit-time data-visit-time="1412274650"></div>      <li > <a target=_blank href="http://hi.baidu.com/pcparty"> <img src="http://hiphotos.baidu.com/space/scrop%3D65%3Bq%3D100/sign%3Dedc99bda9345d688a75cf5fbd4ff4b2b/8d5494eef01f3a2903c187279825bc315d607cc9.jpg" title="pcparty" alt="pcparty" class=portrait> </a> <a target=_blank href="http://hi.baidu.com/pcparty" class=user-name title="pcparty"> pcparty </a> <div class=visit-time data-visit-time="1412082844"></div>    </ul> </div>  <div class=comment-title>评论</div> <div class=comment-content></div> </div>   </div>  </div>  </div> </div> </section>  <footer class="mod-footer mod-cs-footer"><div class="clearfix hidden-box"></div><div class=footer-box><div class=inner-box><a href=http://help.baidu.com/question?prod_en=hi target=_blank>帮助中心</a><span>&nbsp;|&nbsp;</span><a href=http://tieba.baidu.com/p/1781683739 target=_blank>空间客服</a><span>&nbsp;|&nbsp;</span><a href=http://tousu.baidu.com/hi/add target=_blank>投诉中心</a><span>&nbsp;|&nbsp;</span><a href=http://www.baidu.com/search/hi_contract.html target=_blank>空间协议</a></div><div class=copy-box>&copy;2015&nbsp;Baidu</div></div></footer>  <script src="http://hi.bdimg.com/static/qbase/js/mod/mod_foot.js?v=382c615f.js"></script> <script>
        	qing.dom.ready(function(){
                if (qVisitorInfo.loginStatus == 'activated'){
                    qext.stat.ns('m_20121012_loga_num');
					qext.fn.setStoken();
				}
			});
        </script>        <script>qext.stat.ns('m_20120425_n0001');</script>  <script src="http://hi.bdimg.com/static/qcomment/js/qcmt_import.js?v=ac96f988.js"></script>  <script src="http://hi.bdimg.com/static/qpublish/js/editor/shCore.js?v=805e084f.js"></script> <script>
        SyntaxHighlighter.highlight();
    </script>   <script src="http://hi.bdimg.com/static/qhome/js/detail/20001/detail.js?v=3d7781df.js"></script>   <script>wpo.tti=new Date*1;</script><script src="http://hi.baidu.com/cm/static/js/allsite.js?v=75674092.js?v=201504141523"></script><script>document.write(unescape("%3Cscript src='http://hm.baidu.com/h.js%3F8c869b543955d43e496c2efee5b55823' type='text/javascript'%3E%3C/script%3E"));qext.stat.ns('m_20120713_qing_pv');</script>